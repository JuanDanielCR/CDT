$(function() {
	var fhInicio;
	var fhFinal;
	var yI;
	var yF;
	var conjunto;
	var conjunto2;
	
	/*
	 * En esta parte se realiza la obtencion de la fecha desde el campo de inicio y fin de ciclo 
	 */
	
	conjunto=$("#valorFechaPasar").val();
	
	if(conjunto===null||conjunto==="Unavailable"){
	if(conjunto==="Unavailable"){
		$("label#valorFecha").text(conjunto);
	}else{
	fhInicio = $("#dpInicio").val().split("/");
	fhFinal = $("#dpFin").val().split("/");	

	yI = fhInicio[2];
	yF = fhFinal[2];
	conjunto = yI + "-" + yF;
	
		if(conjunto!=="undefined-undefined"){
			$("label#valorFecha").text(conjunto);
		}
	}
	}else{
		$("label#valorFecha").text(conjunto);
	}

	/*
	 * Esta Funcion analisa si existe un cambio dentro del campo de fecha de inicio
	 * primero obtiene la fecha del campo y se realiza un split del caracter separador de la fecha
	 * y lo almacena en una variable del arreglo, despues esta es guardada en otra variable en la cual 
	 * se guardara un nuevo tipo de dato Date, despues solo se guardara el año de la fecha en otra variable
	 * llamada yI, al hacerse el cambio se validara si el campo yF que es la año de la fecha de termino
	 * esta nulo o no dependiendo de ello se mostrara un resultado en el texfield de ciclo.  
	 */
	$('#dpInicio').change(function() {
		fhInicio = $("#dpInicio").val().split("/");
		yI = fhInicio[2];
		fhFinal=$("#dpFin").val().split("/");
		yF = fhFinal[2];
		if(yF==null){
			conjunto2=yI+"-"+" ";
			$("label#valorFecha").text(conjunto2);
			$("#valorFechaPasar").val("");
		}else{
			if(yI<=yF){
				conjunto2=yI+"-"+yF;
			}else{
				conjunto2="Invalido";
			}
			
			$("label#valorFecha").text(conjunto2);
			$("#valorFechaPasar").val(conjunto2);
		}
	});
	
	/*
	 *  Esta funcion es lo mismo que la anterior solo que para el campo de fecha de termino el cual sus
	 *  validaciones sera si la variable yI es nula o no lo es dependiendo de eso se pinta un resultado
	 */	
	$('#dpFin').change(function() {
		fhInicio = $("#dpInicio").val().split("/");
		yI = fhInicio[2];
		fhFinal = $("#dpFin").val().split("/");
		yF = fhFinal[2];
		if(yI==null){
			conjunto = " " + "-" + yF;
			$("label#valorFecha").text(conjunto);
			$("#valorFechaPasar").val("");
		}else{
			if(yI<=yF){
				conjunto=yI+"-"+yF;
			}else{
				conjunto="Invalido";
			}
		$("label#valorFecha").text(conjunto);
		
			if(conjunto==="Invalido"){
				$("#valorFechaPasar").val("");
			}else{
				$("#valorFechaPasar").val(conjunto);
			}
		}
			
	});
});